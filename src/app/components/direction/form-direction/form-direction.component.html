
<div class="w-full h-full">
  <div>
    <app-bouton-retour routeUrl="accueil/dashboard" titre="Retour" />
  </div>
  <div class="flex flex-col items-center justify-center mt-16">
    <div class="container w-full max-w-md p-6 bg-white rounded-lg shadow-md">
      <h2 class="mb-4 text-2xl font-bold text-gray-900">
        {{ isEditMode ? "Modifier Direction" : "Créer Direction" }}
      </h2>
      <form
        [formGroup]="directionForm"
        (ngSubmit)="onSubmit()"
        class="flex flex-col"
      >
        <input
          type="text"
          id="nomDirection"
          placeholder="Nom direction"
          formControlName="nomDirection"
          class="p-2 mb-4 text-gray-900 transition duration-150 ease-in-out bg-gray-100 border-0 rounded-md focus:bg-gray-200 focus:outline-none focus:ring-1 focus:ring-indigo-600"
        />
        <div
          *ngIf="
            directionForm.get('nomDirection')?.invalid &&
            (directionForm.get('nomDirection')?.dirty ||
              directionForm.get('nomDirection')?.touched)
          "
        >
          <small class="text-red-500">Le nom de la direction est requis.</small>
        </div>

        <textarea
          id="description"
          placeholder="Description"
          formControlName="description"
          class="p-2 mb-4 text-gray-900 transition duration-150 ease-in-out bg-gray-100 border-0 rounded-md focus:bg-gray-200 focus:outline-none focus:ring-1 focus:ring-indigo-600"
        ></textarea>
        <div
          *ngIf="
            directionForm.get('description')?.invalid &&
            (directionForm.get('description')?.dirty ||
              directionForm.get('description')?.touched)
          "
        >
          <small class="text-red-500">La description est requise.</small>
        </div>

        <select
          id="idEntreprise"
          formControlName="idEntreprise"
          class="p-2 mb-4 text-gray-900 transition duration-150 ease-in-out bg-gray-100 border-0 rounded-md focus:bg-gray-200 focus:outline-none focus:ring-1 focus:ring-indigo-600"
        >
          <option value="" disabled>Sélectionnez une entreprise</option>
          <option
            *ngFor="let entreprise of entreprises"
            [value]="entreprise.idEntreprise"
          >
            {{ entreprise.nomEntreprise }}
          </option>
        </select>
        <div
          *ngIf="
            directionForm.get('idEntreprise')?.invalid &&
            (directionForm.get('idEntreprise')?.dirty ||
              directionForm.get('idEntreprise')?.touched)
          "
        >
          <small class="text-red-500"
            >Veuillez sélectionner une entreprise.</small
          >
        </div>

        <button
          class="px-4 py-2 mt-4 font-bold text-white transition duration-150 ease-in-out bg-indigo-600 rounded-md hover:bg-indigo-800"
          type="submit"
          [disabled]="directionForm.invalid"
        >
          {{ isEditMode ? "Modifier" : "Créer" }}
        </button>
      </form>
    </div>
  </div>
</div>
